{% extends "ocm/base.html" %}
{% load static %}

{% block title %}Reports - OCM Dashboard - {{ block.super }}{% endblock %}

{% block breadcrumb %}
<li>
    <a href="{% url 'ocm:dashboard' %}" class="text-blue-600 hover:text-blue-800">
        <i class="fas fa-shield-alt"></i>
    </a>
</li>
<li class="flex items-center">
    <i class="fas fa-chevron-right text-gray-400 mx-2 text-xs"></i>
    <a href="{% url 'ocm:reports_list' %}" class="text-gray-700">Reports</a>
</li>
{% endblock %}

{% block ocm_content %}
<!-- Page Header -->
<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">OCM Reports & Analytics</h1>
    <p class="text-gray-600">Generate and download comprehensive government-wide reports</p>
</div>

<!-- Report Types Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Budget Report -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center">
                <i class="fas fa-coins text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Budget Report</h3>
                <p class="text-sm text-gray-600">Comprehensive budget analysis across all MOAs</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                <span>Proposed vs. Approved</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                <span>Utilization Rates</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-emerald-500 mr-2"></i>
                <span>Allocation Breakdown</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="generateReport('budget')">
            <i class="fas fa-download mr-2"></i>
            Generate Report
        </button>
    </div>

    <!-- Planning Report -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center">
                <i class="fas fa-clipboard-list text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Planning Report</h3>
                <p class="text-sm text-gray-600">Strategic planning status and completion rates</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-blue-500 mr-2"></i>
                <span>Plan Status by MOA</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-blue-500 mr-2"></i>
                <span>Completion Timelines</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-blue-500 mr-2"></i>
                <span>Goal Achievement</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="generateReport('planning')">
            <i class="fas fa-download mr-2"></i>
            Generate Report
        </button>
    </div>

    <!-- Coordination Report -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                <i class="fas fa-handshake text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Coordination Report</h3>
                <p class="text-sm text-gray-600">Inter-MOA partnerships and collaboration metrics</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-purple-500 mr-2"></i>
                <span>Partnership Overview</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-purple-500 mr-2"></i>
                <span>Success Rates</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-purple-500 mr-2"></i>
                <span>Collaboration Matrix</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="generateReport('coordination')">
            <i class="fas fa-download mr-2"></i>
            Generate Report
        </button>
    </div>

    <!-- Performance Report -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center">
                <i class="fas fa-chart-bar text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Performance Report</h3>
                <p class="text-sm text-gray-600">KPIs and performance indicators across MOAs</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-amber-500 mr-2"></i>
                <span>KPI Dashboard</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-amber-500 mr-2"></i>
                <span>Trend Analysis</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-amber-500 mr-2"></i>
                <span>Comparative Metrics</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="generateReport('performance')">
            <i class="fas fa-download mr-2"></i>
            Generate Report
        </button>
    </div>

    <!-- Executive Summary -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-rose-500 to-red-500 flex items-center justify-center">
                <i class="fas fa-file-contract text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Executive Summary</h3>
                <p class="text-sm text-gray-600">Comprehensive government-wide summary report</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-rose-500 mr-2"></i>
                <span>All Metrics Combined</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-rose-500 mr-2"></i>
                <span>Key Highlights</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-rose-500 mr-2"></i>
                <span>Executive Insights</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-rose-500 to-red-500 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="generateReport('executive')">
            <i class="fas fa-download mr-2"></i>
            Generate Report
        </button>
    </div>

    <!-- Custom Report Builder -->
    <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0 w-16 h-16 rounded-xl bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center">
                <i class="fas fa-tools text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Custom Report</h3>
                <p class="text-sm text-gray-600">Build your own custom report with selected metrics</p>
            </div>
        </div>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-gray-700 mr-2"></i>
                <span>Select MOAs</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-gray-700 mr-2"></i>
                <span>Choose Metrics</span>
            </div>
            <div class="flex items-center text-sm text-gray-700">
                <i class="fas fa-check-circle text-gray-700 mr-2"></i>
                <span>Custom Date Range</span>
            </div>
        </div>
        <button class="min-h-[48px] w-full px-4 py-3 bg-gradient-to-r from-gray-700 to-gray-900 text-white rounded-xl font-semibold hover:shadow-lg hover:-translate-y-1 transition-all duration-300"
                onclick="openReportBuilder()">
            <i class="fas fa-cog mr-2"></i>
            Build Custom Report
        </button>
    </div>
</div>

<!-- Recent Reports -->
<div class="mt-12 bg-white rounded-xl shadow-md border border-gray-200 p-6">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Recently Generated Reports</h2>
    <div class="space-y-4">
        {% for report in recent_reports %}
        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors duration-200">
            <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                    <i class="fas fa-file-pdf text-red-500 text-2xl"></i>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900">{{ report.name }}</h3>
                    <p class="text-sm text-gray-600">Generated on {{ report.created_at|date:"F d, Y" }}</p>
                </div>
            </div>
            <button class="min-h-[48px] px-4 py-2 text-sm font-medium text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-lg transition-colors duration-200"
                    onclick="downloadReport('{{ report.id }}')">
                <i class="fas fa-download mr-2"></i>
                Download
            </button>
        </div>
        {% empty %}
        <div class="text-center py-12">
            <i class="fas fa-file-alt text-gray-300 text-5xl mb-4"></i>
            <p class="text-gray-600 font-medium mb-2">No recent reports</p>
            <p class="text-gray-500 text-sm">Generate your first report to see it here</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
    function generateReport(reportType) {
        console.log('Generating report:', reportType);

        if (typeof window.showToast === 'function') {
            window.showToast({
                message: `Generating ${reportType} report...`,
                level: 'info'
            });
        }

        // TODO: Implement report generation logic
        // This will typically call a backend endpoint to generate PDF/Excel
    }

    function openReportBuilder() {
        console.log('Opening custom report builder');

        if (typeof window.showToast === 'function') {
            window.showToast({
                message: 'Custom report builder coming soon',
                level: 'info'
            });
        }

        // TODO: Implement custom report builder modal
    }

    function downloadReport(reportId) {
        console.log('Downloading report:', reportId);

        if (typeof window.showToast === 'function') {
            window.showToast({
                message: 'Downloading report...',
                level: 'info'
            });
        }

        // TODO: Implement report download logic
    }
</script>
{% endblock %}
