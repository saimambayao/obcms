{% extends "base.html" %}
{% load static %}

{% block title %}OCM Dashboard - {{ block.super }}{% endblock %}

{% block extra_css %}
{{ block.super }}
<!-- Chart.js for visualizations -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
    /* OCM-specific purple gradient stat cards */
    .ocm-stat-card {
        background: linear-gradient(135deg, #7c3aed 0%, #6366f1 100%);
    }

    /* OCM Read-Only Hero Banner - White with subtle gradient */
    .ocm-readonly-banner {
        background: linear-gradient(to bottom, #ffffff 0%, #f9fafb 100%);
        border-bottom: 1px solid #e5e7eb;
    }

    /* OCM Navigation Active State */
    .ocm-nav-active {
        background-color: rgba(255, 255, 255, 0.2);
        border-bottom: 3px solid #ffffff;
    }

    /* Chart container responsiveness */
    .chart-container {
        position: relative;
        height: 300px;
        width: 100%;
    }

    @media (max-width: 768px) {
        .chart-container {
            height: 250px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- OCM Read-Only Hero Banner -->
<div class="ocm-readonly-banner py-6 relative overflow-hidden">
    <!-- Decorative Background Elements -->
    <div class="absolute top-0 right-0 w-64 h-64 bg-blue-50 rounded-full blur-3xl transform translate-x-32 -translate-y-32 opacity-30"></div>
    <div class="absolute bottom-0 left-0 w-64 h-64 bg-emerald-50 rounded-full blur-3xl transform -translate-x-32 translate-y-32 opacity-30"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <!-- Icon with gradient background -->
                <div class="w-14 h-14 rounded-2xl flex items-center justify-center bg-gradient-to-br from-blue-800 to-emerald-600 shadow-lg">
                    <i class="fas fa-shield-alt text-2xl text-white"></i>
                </div>
                <div>
                    <h2 class="text-xl font-extrabold tracking-tight text-gray-900">OCM Read-Only View</h2>
                    <p class="text-sm text-gray-600 font-medium">Government-Wide Oversight Dashboard</p>
                </div>
            </div>
            <div class="hidden md:flex items-center space-x-3 bg-blue-50 px-4 py-2 rounded-full border border-blue-100">
                <i class="fas fa-info-circle text-lg text-blue-600"></i>
                <span class="text-sm font-semibold text-gray-700">Aggregated data from all 44 MOAs</span>
            </div>
        </div>
    </div>
</div>

<!-- OCM Navigation -->
<div class="bg-white border-b border-gray-200 sticky top-16 z-30 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <nav class="flex space-x-8 overflow-x-auto" role="navigation" aria-label="OCM Navigation">
            <a href="{% url 'ocm:dashboard' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if request.resolver_match.url_name == 'dashboard' %}ocm-nav-active text-purple-600{% endif %}"
               aria-current="{% if request.resolver_match.url_name == 'dashboard' %}page{% endif %}">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="{% url 'ocm:consolidated_budget' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if 'budget' in request.resolver_match.url_name %}ocm-nav-active text-purple-600{% endif %}">
                <i class="fas fa-coins"></i>
                <span>Budget</span>
            </a>
            <a href="{% url 'ocm:planning_overview' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if 'planning' in request.resolver_match.url_name %}ocm-nav-active text-purple-600{% endif %}">
                <i class="fas fa-clipboard-list"></i>
                <span>Planning</span>
            </a>
            <a href="{% url 'ocm:coordination_matrix' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if 'coordination' in request.resolver_match.url_name %}ocm-nav-active text-purple-600{% endif %}">
                <i class="fas fa-handshake"></i>
                <span>Coordination</span>
            </a>
            <a href="{% url 'ocm:performance_overview' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if 'performance' in request.resolver_match.url_name %}ocm-nav-active text-purple-600{% endif %}">
                <i class="fas fa-chart-bar"></i>
                <span>Performance</span>
            </a>
            <a href="{% url 'ocm:reports_list' %}"
               class="flex items-center space-x-2 py-4 px-3 text-sm font-medium text-gray-700 hover:text-purple-600 whitespace-nowrap transition-colors duration-200 {% if 'reports' in request.resolver_match.url_name %}ocm-nav-active text-purple-600{% endif %}">
                <i class="fas fa-file-alt"></i>
                <span>Reports</span>
            </a>
        </nav>
    </div>
</div>

<!-- Page Content -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    {% block ocm_content %}
    <!-- OCM-specific content goes here -->
    {% endblock %}
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
    // Global Chart.js configuration for OCM
    if (typeof Chart !== 'undefined') {
        Chart.defaults.font.family = "'Inter', 'Segoe UI', 'Roboto', sans-serif";
        Chart.defaults.color = '#4b5563'; // gray-600
        Chart.defaults.responsive = true;
        Chart.defaults.maintainAspectRatio = false;

        // Currency formatter for Philippine Peso
        window.formatCurrency = function(value) {
            return 'â‚±' + value.toLocaleString('en-PH', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        };

        // Number formatter
        window.formatNumber = function(value) {
            return value.toLocaleString('en-PH');
        };

        // Percentage formatter
        window.formatPercentage = function(value) {
            return value.toFixed(1) + '%';
        };
    }
</script>
{% endblock %}
