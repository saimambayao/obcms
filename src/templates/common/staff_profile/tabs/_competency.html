<div class="bg-white border border-gray-200 rounded-2xl shadow-sm p-6 space-y-4">
    <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
            <i class="fas fa-layer-group text-emerald-600"></i>
            Competency overview
        </h2>
        <span class="text-xs text-gray-500">Aligned with OOBC competency families</span>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600">
        <div>
            <h3 class="font-semibold text-gray-800 mb-2">Core competencies</h3>
            {% if profile.core_competencies %}
            <ul class="space-y-1">
                {% for item in profile.core_competencies %}
                <li class="flex items-start gap-2"><span class="text-emerald-500 mt-1"><i class="fas fa-check-circle"></i></span><span>{{ item }}</span></li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-gray-400">No competencies recorded.</p>
            {% endif %}
        </div>
        <div>
            <h3 class="font-semibold text-gray-800 mb-2">Leadership competencies</h3>
            {% if profile.leadership_competencies %}
            <ul class="space-y-1">
                {% for item in profile.leadership_competencies %}
                <li class="flex items-start gap-2"><span class="text-emerald-500 mt-1"><i class="fas fa-check-circle"></i></span><span>{{ item }}</span></li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-gray-400">No competencies recorded.</p>
            {% endif %}
        </div>
        <div>
            <h3 class="font-semibold text-gray-800 mb-2">Functional competencies</h3>
            {% if profile.functional_competencies %}
            <ul class="space-y-1">
                {% for item in profile.functional_competencies %}
                <li class="flex items-start gap-2"><span class="text-emerald-500 mt-1"><i class="fas fa-check-circle"></i></span><span>{{ item }}</span></li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-gray-400">No competencies recorded.</p>
            {% endif %}
        </div>
    </div>
    <div class="mt-4 text-xs text-gray-500">
        <p>Reference competency families:</p>
        <ul class="list-disc list-inside">
            <li>Core: {{ competency_categories.core|join:', ' }}</li>
            <li>Leadership: {{ competency_categories.leadership|join:', ' }}</li>
            <li>Functional (examples): {{ competency_categories.functional|slice:':5'|join:', ' }}…</li>
        </ul>
    </div>
</div>

<div class="bg-white border border-gray-200 rounded-2xl shadow-sm p-6 space-y-4">
    <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
            <i class="fas fa-graduation-cap text-emerald-600"></i>
            Trainings & development
        </h2>
        <a href="{% url 'common:staff_profiles_list' %}?q={{ profile.user.username }}"
           class="text-sm text-emerald-600 hover:text-emerald-700 font-semibold">View catalogue</a>
    </div>
    <div class="space-y-4">
        <div>
            <h3 class="font-semibold text-gray-800 mb-2 text-sm">Training enrollments</h3>
            {% if trainings %}
            <ul class="space-y-2 text-sm text-gray-600">
                {% for enrollment in trainings %}
                <li class="border border-gray-200 rounded-lg px-3 py-2">
                    <div class="flex items-center justify-between">
                        <span class="font-semibold text-gray-900">{{ enrollment.program.title }}</span>
                        <span class="text-xs px-2 py-0.5 rounded-full
                            {% if enrollment.status == 'completed' %}bg-emerald-100 text-emerald-700
                            {% elif enrollment.status == 'ongoing' %}bg-blue-100 text-blue-700
                            {% elif enrollment.status == 'planned' %}bg-amber-100 text-amber-700
                            {% else %}bg-gray-200 text-gray-600{% endif %}">
                            {{ enrollment.get_status_display }}
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">
                        {% if enrollment.scheduled_date %}Scheduled {{ enrollment.scheduled_date|date:"M d, Y" }}{% endif %}
                        {% if enrollment.completion_date %} · Completed {{ enrollment.completion_date|date:"M d, Y" }}{% endif %}
                    </p>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-sm text-gray-500">No trainings captured yet.</p>
            {% endif %}
        </div>
        <div>
            <h3 class="font-semibold text-gray-800 mb-2 text-sm">Development plans</h3>
            {% if development_plans %}
            <ul class="space-y-2 text-sm text-gray-600">
                {% for plan in development_plans %}
                <li class="border border-gray-200 rounded-lg px-3 py-2">
                    <div class="flex items-center justify-between">
                        <span class="font-semibold text-gray-900">{{ plan.title }}</span>
                        <span class="text-xs px-2 py-0.5 rounded-full
                            {% if plan.status == 'completed' %}bg-emerald-100 text-emerald-700
                            {% elif plan.status == 'in_progress' %}bg-blue-100 text-blue-700
                            {% else %}bg-gray-200 text-gray-600{% endif %}">
                            {{ plan.get_status_display }}
                        </span>
                    </div>
                    <p class="text-xs text-gray-500">
                        {% if plan.competency_focus %}Focus: {{ plan.competency_focus }}{% endif %}
                        {% if plan.target_date %} · Target {{ plan.target_date|date:"M d, Y" }}{% endif %}
                    </p>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-sm text-gray-500">No individual development plans recorded.</p>
            {% endif %}
        </div>
    </div>
</div>
