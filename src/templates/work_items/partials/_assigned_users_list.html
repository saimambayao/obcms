{% load static %}
{# Assigned Users List Partial - for HTMX swaps #}
<div id="assigned-users-list">
    {% if work_item.assignees.exists %}
        <div class="hidden" aria-hidden="true" data-autosave-sync>
            {% for user in work_item.assignees.all %}
                <input type="hidden" name="assignees" value="{{ user.pk }}">
            {% endfor %}
        </div>
    {% endif %}
    {% if work_item.assignees.exists %}
        <div class="space-y-2">
            {% for user in work_item.assignees.all %}
                <div class="flex items-center justify-between p-3 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg border border-emerald-100 hover:from-emerald-100 hover:to-blue-100 transition-colors">
                    <div class="flex-1">
                        <div class="flex items-center space-x-2">
                            <span class="inline-flex items-center justify-center h-8 w-8 rounded-full text-xs font-medium
                                {% if user.user_type == 'oobc_executive' %}bg-amber-100 text-amber-800
                                {% elif user.user_type == 'oobc_staff' %}bg-emerald-100 text-emerald-800
                                {% else %}bg-blue-100 text-blue-800{% endif %}">
                                {{ user.get_initials }}
                            </span>
                            <div>
                                <div class="text-sm font-medium text-gray-900">
                                    {{ user.get_full_name }}
                                </div>
                                {% if user.position %}
                                    <div class="text-xs text-gray-500">{{ user.position }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2 ml-3">
                        {# Remove User Button #}
                        <button type="button"
                                hx-post="{% url 'common:work_item_remove_assignee' work_item.pk user.pk %}"
                                hx-target="#assigned-users-list"
                                hx-swap="outerHTML"
                                class="text-gray-600 hover:text-red-600 transition-colors"
                                title="Remove user">
                            <i class="fas fa-times-circle"></i>
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-sm text-gray-500 italic py-2">No users assigned yet</p>
    {% endif %}
</div>
