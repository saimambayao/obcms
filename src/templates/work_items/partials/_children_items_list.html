{% load static %}
{# Children Items List Partial - for HTMX swaps #}
<div id="children-items-list">
    {% if work_item.children.exists %}
        <div class="space-y-2">
            {% for child in work_item.children.all %}
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                    <div class="flex-1">
                        <div class="flex items-center space-x-2">
                            <span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium
                                {% if child.work_type == 'sub_project' %}bg-indigo-100 text-indigo-800
                                {% elif child.work_type == 'activity' %}bg-blue-100 text-blue-800
                                {% elif child.work_type == 'sub_activity' %}bg-cyan-100 text-cyan-800
                                {% elif child.work_type == 'task' %}bg-emerald-100 text-emerald-800
                                {% elif child.work_type == 'subtask' %}bg-teal-100 text-teal-800
                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ child.get_work_type_display }}
                            </span>
                            <a href="{% url 'common:work_item_detail' child.pk %}"
                               class="text-sm font-medium text-gray-900 hover:text-blue-600">
                                {{ child.title }}
                            </a>
                        </div>
                        <div class="mt-1 text-xs text-gray-500">
                            Status: <span class="font-medium">{{ child.get_status_display }}</span>
                            • Priority: <span class="font-medium">{{ child.get_priority_display }}</span>
                            • Progress: <span class="font-medium">{{ child.progress }}%</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2 ml-3">
                        {# View Button #}
                        <a href="{% url 'common:work_item_detail' child.pk %}"
                           class="text-gray-600 hover:text-blue-600 transition-colors"
                           title="View child item">
                            <i class="fas fa-eye"></i>
                        </a>
                        {# Edit Button #}
                        <a href="{% url 'common:work_item_edit' child.pk %}"
                           class="text-gray-600 hover:text-blue-600 transition-colors"
                           title="Edit child item">
                            <i class="fas fa-edit"></i>
                        </a>
                        {# Delete Button #}
                        <button type="button"
                                hx-get="{% url 'common:work_item_delete_modal' pk=child.pk %}"
                                hx-target="#delete-modal-container"
                                hx-swap="innerHTML"
                                class="text-gray-600 hover:text-red-600 transition-colors"
                                title="Delete child item">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-sm text-gray-500 italic py-2">No children items yet</p>
    {% endif %}
</div>
