<!-- HTMX Partial: Recent Proposals List -->
{% if recent_proposals %}
<div class="space-y-3">
    {% for proposal in recent_proposals %}
    <a href="{% url 'budget_preparation:proposal_detail' proposal.pk %}"
       class="proposal-item block p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-200"
       data-proposal-id="{{ proposal.pk }}"
       data-status="{{ proposal.status }}">
        <div class="flex items-start justify-between">
            <div class="flex-1">
                <div class="flex items-center space-x-2 mb-2">
                    <span class="text-sm font-semibold text-gray-900">FY {{ proposal.fiscal_year }}</span>
                    {% if proposal.status == 'draft' %}
                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full">Draft</span>
                    {% elif proposal.status == 'submitted' %}
                    <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full">Submitted</span>
                    {% elif proposal.status == 'under_review' %}
                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">Under Review</span>
                    {% elif proposal.status == 'approved' %}
                    <span class="px-2 py-1 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full">Approved</span>
                    {% elif proposal.status == 'rejected' %}
                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full">Rejected</span>
                    {% endif %}
                </div>
                <h3 class="text-base font-semibold text-gray-900 mb-1">{{ proposal.title }}</h3>
                <p class="text-sm text-gray-600 mb-2">{{ proposal.description|truncatewords:20 }}</p>
                <div class="flex items-center text-xs text-gray-500">
                    <i class="fas fa-user mr-1"></i>
                    {{ proposal.submitted_by.get_full_name|default:proposal.submitted_by.username }}
                    <span class="mx-2">•</span>
                    <i class="fas fa-calendar mr-1"></i>
                    {{ proposal.updated_at|date:"M d, Y" }}
                </div>
            </div>
            <div class="text-right">
                <div class="text-lg font-bold text-emerald-600">
                    ₱{{ proposal.total_proposed_budget|floatformat:2 }}
                </div>
                <div class="text-xs text-gray-500">
                    {{ proposal.program_budgets.count }} program{{ proposal.program_budgets.count|pluralize }}
                </div>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-12 text-gray-500">
    <i class="fas fa-inbox text-6xl mb-4 text-gray-300"></i>
    <p class="text-lg font-medium mb-2">No proposals yet</p>
    <p class="text-sm mb-4">Get started by creating your first budget proposal</p>
    <a href="{% url 'budget_preparation:proposal_create' %}"
       role="button"
       class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200">
        <i class="fas fa-plus mr-2"></i>
        Create Proposal
    </a>
</div>
{% endif %}
