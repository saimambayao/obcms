{% load i18n static %}<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}{% get_current_language_bidi as LANGUAGE_BIDI %}
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}" dir="{{ LANGUAGE_BIDI|yesno:'rtl,ltr,auto' }}">
<head>
<title>{% block title %}{{ title }} | {% if site_title %}{{ site_title }}{% else %}{% trans 'Django site admin' %}{% endif %}{% endblock %}</title>
<link rel="stylesheet" href="{% block stylesheet %}{% static "admin/css/base.css" %}{% endblock %}">
{% block dark-mode-vars %}
  <link rel="stylesheet" href="{% static "admin/css/dark_mode.css" %}">
{% endblock %}
{% block responsive %}
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="{% static "admin/css/responsive.css" %}">
{% endblock %}
{% if 'grappelli' in settings.INSTALLED_APPS %}
    <link rel="stylesheet" href="{% static "grappelli/css/grappelli.css" %}">
{% endif %}
{% block blockbots %}<meta name="robots" content="NONE,NOARCHIVE">{% endblock %}

<!-- Tailwind CSS utilities (Production Build) -->
<link rel="stylesheet" href="{% static 'css/output.css' %}">

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Project-specific admin overrides -->
<link rel="stylesheet" href="{% static 'admin/css/custom.css' %}">

{% block extrahead %}{% endblock %}
</head>
{% load i18n %}

<body class="{% if is_popup %}popup {% endif %}{% block bodyclass %}{% endblock %}"
  data-admin-utc-offset="{% now "Z" %}">

<!-- Skip Navigation for Accessibility -->
<a href="#main-content"
   class="skip-link sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-blue-600 focus:rounded-lg focus:shadow-lg"
   aria-label="Skip to main content">
    {% trans 'Skip to main content' %}
</a>

<!-- ARIA Live Region for Dynamic Updates -->
<div id="aria-live-region"
     class="sr-only"
     aria-live="polite"
     aria-atomic="true"
     role="status"></div>

<div id="container">

    {% block header %}
    <!-- Header with Official OBCMS Blue-800 to Emerald-600 Gradient -->
    <header id="header"
            class="bg-gradient-to-r from-blue-800 to-emerald-600 text-white shadow-lg"
            role="banner">
        <div class="max-w-screen-2xl mx-auto">
            <!-- Branding & User Tools Container -->
            <div class="flex items-center justify-between px-6 py-4">
                <!-- Branding -->
                <div id="branding" class="flex-1">
                {% block branding %}
                    <h1 id="site-name" class="text-2xl font-bold tracking-tight">
                        <a href="{% url 'admin:index' %}"
                           class="text-white hover:text-gray-100 transition-colors duration-200 flex items-center space-x-2"
                           aria-label="{% trans 'Go to admin home' %}">
                            <i class="fas fa-shield-alt text-emerald-300" aria-hidden="true"></i>
                            <span>{% if site_header %}{{ site_header }}{% else %}{% trans 'OBC Management System' %}{% endif %}</span>
                        </a>
                    </h1>
                {% endblock %}
                </div>

                <!-- User Tools -->
                {% block usertools %}
                {% if has_permission %}
                <nav id="user-tools"
                     class="flex items-center space-x-4 text-sm"
                     aria-label="User tools">
                    {% block welcome-msg %}
                    <div class="hidden sm:flex items-center space-x-2 text-white/90">
                        <i class="fas fa-user-circle text-lg" aria-hidden="true"></i>
                        <span>
                            {% trans 'Welcome,' %}
                            <strong class="font-semibold text-white">{% firstof user.get_short_name user.get_username %}</strong>
                        </span>
                    </div>
                    {% endblock %}

                    {% block userlinks %}
                    <div class="flex items-center space-x-3 border-l border-white/20 pl-4">
                        {% if site_url %}
                        <a href="{{ site_url }}"
                           class="text-white/90 hover:text-white font-medium transition-colors duration-200 flex items-center space-x-1"
                           aria-label="{% trans 'View site' %}">
                            <i class="fas fa-external-link-alt text-xs" aria-hidden="true"></i>
                            <span class="hidden md:inline">{% trans 'View site' %}</span>
                        </a>
                        {% endif %}

                        {% if user.is_active and user.is_staff %}
                            {% url 'django-admindocs-docroot' as docsroot %}
                            {% if docsroot %}
                            <a href="{{ docsroot }}"
                               class="text-white/90 hover:text-white font-medium transition-colors duration-200 flex items-center space-x-1"
                               aria-label="{% trans 'Documentation' %}">
                                <i class="fas fa-book text-xs" aria-hidden="true"></i>
                                <span class="hidden lg:inline">{% trans 'Documentation' %}</span>
                            </a>
                            {% endif %}
                        {% endif %}

                        {% if user.has_usable_password %}
                        <a href="{% url 'admin:password_change' %}"
                           class="text-white/90 hover:text-white font-medium transition-colors duration-200 flex items-center space-x-1"
                           aria-label="{% trans 'Change password' %}">
                            <i class="fas fa-key text-xs" aria-hidden="true"></i>
                            <span class="hidden lg:inline">{% trans 'Change password' %}</span>
                        </a>
                        {% endif %}

                        <a href="{% url 'admin:logout' %}"
                           class="bg-white/10 hover:bg-white/20 text-white font-semibold px-3 py-1.5 rounded-lg transition-all duration-200 flex items-center space-x-1 min-h-[40px]"
                           aria-label="{% trans 'Log out' %}">
                            <i class="fas fa-sign-out-alt text-sm" aria-hidden="true"></i>
                            <span class="hidden sm:inline">{% trans 'Log out' %}</span>
                        </a>
                    </div>
                    {% endblock %}
                </nav>
                {% endif %}
                {% endblock %}
            </div>
        </div>
        {% block nav-global %}{% endblock %}
    </header>
    {% endblock %}

    {% block nav-breadcrumbs %}
      {% block breadcrumbs %}
      <nav class="bg-white border-b border-gray-200 px-6 py-3"
           aria-label="{% trans 'Breadcrumb' %}">
          <ol class="flex items-center space-x-2 text-sm max-w-screen-2xl mx-auto">
              <li>
                  <a href="{% url 'admin:index' %}"
                     class="text-blue-600 hover:text-blue-800 transition-colors duration-200 flex items-center"
                     aria-label="{% trans 'Home' %}">
                      <i class="fas fa-home" aria-hidden="true"></i>
                      <span class="sr-only">{% trans 'Home' %}</span>
                  </a>
              </li>
              {% if title %}
              <li class="flex items-center" aria-current="page">
                  <i class="fas fa-chevron-right text-gray-400 mx-2 text-xs" aria-hidden="true"></i>
                  <span class="text-gray-700 font-medium">{{ title }}</span>
              </li>
              {% endif %}
          </ol>
      </nav>
      {% endblock %}
    {% endblock %}

    {% block nav-sidebar %}
    {% endblock %}

    {% block messages %}
        {% if messages %}
        <div class="max-w-screen-2xl mx-auto px-6 pt-4" role="alert" aria-live="polite">
            <ul class="messagelist space-y-3">{% for message in messages %}
              <li class="{% if message.tags %}message-{{ message.tags }}{% endif %} rounded-lg border-l-4 p-4 shadow-sm animate-fade-in
                  {% if 'success' in message.tags %}bg-emerald-50 border-emerald-500 text-emerald-800{% endif %}
                  {% if 'error' in message.tags %}bg-red-50 border-red-500 text-red-800{% endif %}
                  {% if 'warning' in message.tags %}bg-amber-50 border-amber-500 text-amber-800{% endif %}
                  {% if 'info' in message.tags %}bg-blue-50 border-blue-500 text-blue-800{% endif %}">
                  <div class="flex items-start">
                      <div class="flex-shrink-0">
                          {% if 'success' in message.tags %}
                          <i class="fas fa-check-circle text-emerald-500 text-lg" aria-hidden="true"></i>
                          {% elif 'error' in message.tags %}
                          <i class="fas fa-exclamation-circle text-red-500 text-lg" aria-hidden="true"></i>
                          {% elif 'warning' in message.tags %}
                          <i class="fas fa-exclamation-triangle text-amber-500 text-lg" aria-hidden="true"></i>
                          {% else %}
                          <i class="fas fa-info-circle text-blue-500 text-lg" aria-hidden="true"></i>
                          {% endif %}
                      </div>
                      <div class="ml-3 flex-1">
                          <p class="text-sm font-medium">{{ message|capfirst }}</p>
                      </div>
                  </div>
              </li>
            {% endfor %}</ul>
        </div>
        {% endif %}
    {% endblock messages %}

    <main id="content"
          class="{% block coltype %}colM{% endblock %} max-w-screen-2xl mx-auto px-6 py-6"
          role="main"
          aria-labelledby="content-title">
        {% block pretitle %}{% endblock %}
        {% block content_title %}
            {% if title %}
            <h1 id="content-title" class="text-3xl font-bold text-gray-900 mb-6">{{ title }}</h1>
            {% endif %}
        {% endblock %}
        {% block content_subtitle %}
            {% if subtitle %}
            <h2 class="text-xl font-semibold text-gray-700 mb-4">{{ subtitle }}</h2>
            {% endif %}
        {% endblock %}
        {% block content %}
        {% block object-tools %}{% endblock %}
        {{ content }}
        {% endblock %}
        {% block sidebar %}{% endblock %}
    </main>

    {% block footer %}
    <footer id="footer"
            class="bg-gray-50 border-t border-gray-200 py-4 mt-8"
            role="contentinfo">
        <div class="max-w-screen-2xl mx-auto px-6">
            <p class="text-center text-sm text-gray-600">
                <i class="fas fa-code text-emerald-600 mr-1" aria-hidden="true"></i>
                {% blocktrans %}Powered by Django Admin{% endblocktrans %}
            </p>
        </div>
    </footer>
    {% endblock %}
</div>

<!-- Custom JavaScript for enhanced functionality -->
<script src="{% static 'admin/js/custom.js' %}" defer></script>
</body>
</html>
