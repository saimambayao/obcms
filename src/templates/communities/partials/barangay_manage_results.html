<div class="space-y-4" id="barangay-results">
    <div class="bg-white rounded-2xl border border-gray-200 shadow-sm px-6 py-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <form
            method="get"
            hx-get="{% url 'common:communities_manage' %}"
            hx-target="#barangay-results-container"
            hx-swap="innerHTML transition:true"
            class="flex flex-wrap items-center gap-3 text-sm text-gray-600"
        >
            {% for key, value in request.GET.items %}
                {% if key != "barangay_page_size" and key != "barangay_page" %}
                    <input type="hidden" name="{{ key }}" value="{{ value }}">
                {% endif %}
            {% endfor %}
            <label for="barangay-page-size" class="font-semibold text-gray-700">Show</label>
            <select
                id="barangay-page-size"
                name="barangay_page_size"
                class="min-w-[5rem] rounded-xl border border-gray-200 bg-white py-2 pl-3 pr-10 text-sm font-medium text-gray-700 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 transition-all duration-200"
                onchange="this.form.requestSubmit()"
            >
                {% for option in barangay_page_size_options %}
                    <option value="{{ option }}" {% if barangay_page_size == option %}selected{% endif %}>{{ option }}</option>
                {% endfor %}
            </select>
            <span>records per page</span>
        </form>
        <div class="text-sm text-gray-600">
            {% if communities.paginator.count %}
                Showing {{ communities.start_index }}&ndash;{{ communities.end_index }} of {{ communities.paginator.count }} barangay OBCs
            {% else %}
                No barangay OBCs match the current filters.
            {% endif %}
        </div>
    </div>

    {% include "components/data_table_card.html" with title="Barangay OBC Registry" icon_class="fas fa-list" accent_class="bg-gradient-to-r from-emerald-500 to-emerald-600" headers=barangay_table.headers rows=barangay_table.rows show_actions=barangay_table.show_actions empty_message="No barangay OBC records match the current filters." %}

    <div class="flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between">
        <div class="inline-flex items-center gap-2">
            <span class="text-sm font-semibold text-gray-700">Navigation</span>
            <div class="inline-flex overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm">
                {% if communities.has_previous %}
                    {% if barangay_base_querystring %}
                        {% with query=barangay_base_querystring|add:'&barangay_page='|add:communities.previous_page_number %}
                            <a
                                href="?{{ query }}"
                                hx-get="{% url 'common:communities_manage' %}?{{ query }}"
                                hx-target="#barangay-results-container"
                                hx-swap="innerHTML transition:true"
                                class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fas fa-chevron-left text-xs"></i>
                                Previous
                            </a>
                        {% endwith %}
                    {% else %}
                        {% with query='barangay_page='|add:communities.previous_page_number %}
                            <a
                                href="?{{ query }}"
                                hx-get="{% url 'common:communities_manage' %}?{{ query }}"
                                hx-target="#barangay-results-container"
                                hx-swap="innerHTML transition:true"
                                class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fas fa-chevron-left text-xs"></i>
                                Previous
                            </a>
                        {% endwith %}
                    {% endif %}
                {% else %}
                    <span class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-300 bg-gray-50">
                        <i class="fas fa-chevron-left text-xs"></i>
                        Previous
                    </span>
                {% endif %}

                <span class="hidden lg:inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-600 border-l border-r border-gray-200">
                    Page {{ communities.number }} of {{ communities.paginator.num_pages }}
                </span>

                {% if communities.has_next %}
                    {% if barangay_base_querystring %}
                        {% with query=barangay_base_querystring|add:'&barangay_page='|add:communities.next_page_number %}
                            <a
                                href="?{{ query }}"
                                hx-get="{% url 'common:communities_manage' %}?{{ query }}"
                                hx-target="#barangay-results-container"
                                hx-swap="innerHTML transition:true"
                                class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-colors"
                            >
                                Next
                                <i class="fas fa-chevron-right text-xs"></i>
                            </a>
                        {% endwith %}
                    {% else %}
                        {% with query='barangay_page='|add:communities.next_page_number %}
                            <a
                                href="?{{ query }}"
                                hx-get="{% url 'common:communities_manage' %}?{{ query }}"
                                hx-target="#barangay-results-container"
                                hx-swap="innerHTML transition:true"
                                class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-colors"
                            >
                                Next
                                <i class="fas fa-chevron-right text-xs"></i>
                            </a>
                        {% endwith %}
                    {% endif %}
                {% else %}
                    <span class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-300 bg-gray-50">
                        Next
                        <i class="fas fa-chevron-right text-xs"></i>
                    </span>
                {% endif %}
            </div>
        </div>
        <div class="text-sm text-gray-600">
            {% if communities.paginator.count %}
                Page {{ communities.number }} of {{ communities.paginator.num_pages }}
            {% else %}
                Adjust filters or add new barangay OBC records to populate this list.
            {% endif %}
        </div>
    </div>
</div>
