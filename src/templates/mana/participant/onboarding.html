{% extends "base.html" %}
{% load static %}

{% block title %}Complete Your Profile Â· {{ assessment.title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-neutral-50 flex items-center justify-center py-16 px-4">
    <div class="w-full max-w-3xl">
        <div class="bg-white rounded-3xl shadow-xl border border-gray-100 p-10 space-y-6">
            <header class="space-y-2 text-center">
                <p class="text-sm uppercase tracking-wide text-gray-400">Regional MANA Participant Onboarding</p>
                <h1 class="text-3xl font-bold text-gray-900">Tell us about yourself</h1>
                <p class="text-gray-600">We use this profile to understand the stakeholders contributing to the assessment. Once completed, Workshop 1 will unlock automatically.</p>
            </header>

            <div class="bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-2xl px-6 py-4 text-sm">
                <p><strong>Signed in as:</strong> {{ request.user.email }}</p>
                <p>Your responses remain confidential and will only be used for the Regional MANA assessment.</p>
            </div>

            <form method="post" class="space-y-6" data-task-id="{{ participant.id }}">
                {% csrf_token %}
                <div class="grid gap-6 md:grid-cols-2">
                    {% include "components/form_field.html" with field=form.stakeholder_type label="Stakeholder type" placeholder="Select your stakeholder role" %}
                    {% include "components/form_field.html" with field=form.organization label="Organization" placeholder="Organization or community group" %}
                </div>
                <div class="grid gap-6 md:grid-cols-3">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Province</label>
                        <div class="px-4 py-2 bg-neutral-100 border border-neutral-200 rounded-xl text-sm text-gray-700">{{ participant.province.name }}</div>
                        {{ form.province }}
                    </div>
                    {% include "components/form_field.html" with field=form.municipality label="Municipality" placeholder="Optional" %}
                    {% include "components/form_field.html" with field=form.barangay label="Barangay" placeholder="Optional" %}
                </div>
                <div class="grid gap-6 md:grid-cols-2">
                    {% include "components/form_field.html" with field=form.password label="Set new password" placeholder="Enter a secure password" %}
                    {% include "components/form_field.html" with field=form.password_confirm label="Confirm password" placeholder="Re-type password" %}
                </div>
                <div class="bg-white border border-emerald-100 rounded-2xl px-6 py-5 flex items-start gap-3">
                    <input type="checkbox" name="consent" id="consent" class="mt-1 h-4 w-4 text-emerald-600 border-gray-300 rounded" required>
                    <label for="consent" class="text-sm text-gray-700 leading-relaxed">
                        I consent to participate in the Regional MANA workshops and allow my responses to be used for the collaborative assessment, in accordance with OOBC privacy guidelines.
                    </label>
                </div>
                <div class="flex items-center justify-end gap-3">
                    <a href="{% url 'mana:participant_dashboard' assessment.id %}" class="text-sm text-gray-500 hover:text-gray-700">Back to dashboard</a>
                    <button type="submit" class="btn-primary px-6 py-3 rounded-xl text-white font-semibold shadow-lg hover:shadow-xl transition">Save and unlock Workshop 1</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
